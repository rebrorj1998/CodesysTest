{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)bac94c8e-40f2-4612-a2d7-b0fe03bc6f3f","ParentGuid":"(Guid)00000000-0000-0000-0000-000000000000","Name":"(string)FB_CrevisSerial","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)829a18f2-c514-4f6e-9634-1df173429203","@Value":{"@Type":"829a18f2","@Value":{"ParentObjects":{"@Type":"fa2ee218:IDictionary","@Value":[{"@Key":"(Guid)21af5390-2942-461a-bf89-951aaf6999f1","@Value":"(Guid)c81fbace-2982-43a6-a233-069543f53754"}]}}}}]},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","829a18f2":"{829a18f2-c514-4f6e-9634-1df173429203}","fa2ee218":"{fa2ee218-a39b-4b6d-b249-49dbddbd168a}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)executeONS(CLK := xExecute);\nRR := inputs[0].2;\nTA := inputs[0].1;\n\nIF executeONS.OSF THEN\n\tserialState := eSerialStates.Idle;\nEND_IF\nreadBufferHasData := inputs[0].4;\nreadBufferDataSize := inputs[1];\nreadTimeout(IN := serialState = eSerialStates.getResponse); \n\n// IF readBufferHasData AND serialState = eSerialStates.Idle THEN\n// \tClearOutReadBuffer := TRUE;\n// ELSE \n// \tClearOutReadBuffer := FALSE;\n// END_IF\n\nCASE serialState OF\n\teSerialStates.Idle :\t\t\t\t// Wait for execute\n\t\t\t\t\t\t\t\t\t\tIF NOT xExecute THEN \n\t\t\t\t\t\t\t\t\t\t\txDone := FALSE;\n\t\t\t\t\t\t\t\t\t\tEND_IF\n\t\t\t\t\t\t\t\t\t\tIF executeONS.OSR THEN\n\t\t\t\t\t\t\t\t\t\t\txDone := FALSE;\n\t\t\t\t\t\t\t\t\t\t\tOSCAT_BASIC._STRING_TO_BUFFER(STR := sendData,0,ADR(outputs[2]),TO_UINT(LEN(sendData)));\n\t\t\t\t\t\t\t\t\t\t\toutputs[1] := TO_BYTE(Standard.LEN(sendData));\n\t\t\t\t\t\t\t\t\t\t\tIF TA THEN\n\t\t\t\t\t\t\t\t\t\t\t\tTR := FALSE;\n\t\t\t\t\t\t\t\t\t\t\tELSE\n\t\t\t\t\t\t\t\t\t\t\t\tTR := TRUE;\n\t\t\t\t\t\t\t\t\t\t\tEND_IF\n\t\t\t\t\t\t\t\t\t\t\txBusy := TRUE;\n\t\t\t\t\t\t\t\t\t\t\tserialState := eSerialStates.writingOutBuffer;\n\t\t\t\t\t\t\t\t\t\tEND_IF\n\t\n\teSerialStates.writeOutBuffer :\t\t// \n\t\t\t\t\t\t\t\t\t\t\n\t\n\teSerialStates.writingOutBuffer :\t// \n\t\t\t\t\t\t\t\t\t\tIF TA = TR THEN\n\t\t\t\t\t\t\t\t\t\t\tserialState := eSerialStates.getResponse;\n\t\t\t\t\t\t\t\t\t\tEND_IF\n\t\n\teSerialStates.getResponse :\t\t\t//\n\t\t\t\t\t\t\t\t\t\tIF readBufferHasData THEN\n\t\t\t\t\t\t\t\t\t\t\tIF readTimeout.Q THEN\n\t\t\t\t\t\t\t\t\t\t\t\ttimeToResponse := readTimeout.ET;\n\t\t\t\t\t\t\t\t\t\t\t\tIF RR THEN\n\t\t\t\t\t\t\t\t\t\t\t\t\tRA := FALSE;\n\t\t\t\t\t\t\t\t\t\t\t\tELSE\n\t\t\t\t\t\t\t\t\t\t\t\t\tRA := TRUE;\n\t\t\t\t\t\t\t\t\t\t\t\tEND_IF\n\t\t\t\t\t\t\t\t\t\t\t\tserialState := eSerialStates.gettingResponse;\n\t\t\t\t\t\t\t\t\t\t\tEND_IF\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tELSIF readTimeout.Q THEN\n\t\t\t\t\t\t\t\t\t\t\treceivedData := '';\n\t\t\t\t\t\t\t\t\t\t\txDone := TRUE;\n\t\t\t\t\t\t\t\t\t\t\txBusy := FALSE;\n\t\t\t\t\t\t\t\t\t\t\tserialState := eSerialStates.Idle;\n\t\t\t\t\t\t\t\t\t\tEND_IF\n\t\n\teSerialStates.gettingResponse:\t\tIF RA = RR THEN\n\t\t\t\t\t\t\t\t\t\t\treceivedData := OSCAT_BASIC.BUFFER_TO_STRING(PT := ADR(inputs[2]),SIZE := 50, 0, readBufferDataSize + 1);\n\t\t\t\t\t\t\t\t\t\t\txDone := TRUE;\n\t\t\t\t\t\t\t\t\t\t\txBusy := FALSE;\n\t\t\t\t\t\t\t\t\t\t\tserialState := eSerialStates.Idle;\n\t\t\t\t\t\t\t\t\t\tEND_IF\n\n\t\nEND_CASE\n//outputs[0].0 := ClearOutReadBuffer;\noutputs[0].1 := TR;\noutputs[0].2 := RA;","LineInfoPersistence":"(string)bac94c8e-40f2-4612-a2d7-b0fe03bc6f3f_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)FUNCTION_BLOCK FB_CrevisSerial EXTENDS CBM.ETrig\nVAR_INPUT\n\tsendData : STRING[60];\n\tinputs : POINTER TO BYTE;\n\toutputs : POINTER TO BYTE;\nEND_VAR\nVAR_OUTPUT\n\treceivedData : STRING[60];\nEND_VAR\nVAR\n\tserialState : eSerialStates;\n\texecuteONS : FB_ONS;\n\treadBufferHasData : BOOL;\n\treadBufferDataSize : BYTE;\n\twriteBufferDataSize : BYTE;\n\treadTimeout : Standard.TON := (PT := T#30MS);\n\ttimeToResponse : TIME;\n\tTA : BOOL;\n\tTR : BOOL;\n\tRA : BOOL;\n\tRR : BOOL;\n\tClearOutReadBuffer : BOOL;\nEND_VAR\nVAR_IN_OUT\n\nEND_VAR","LineInfoPersistence":"(string)bac94c8e-40f2-4612-a2d7-b0fe03bc6f3f_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)147","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}