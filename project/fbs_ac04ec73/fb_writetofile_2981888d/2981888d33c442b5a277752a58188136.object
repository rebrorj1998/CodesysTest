{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)2981888d-33c4-42b5-a277-752a58188136","ParentGuid":"(Guid)00000000-0000-0000-0000-000000000000","Name":"(string)FB_WriteToFile","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)24568a24-c491-472c-a21f-ee5d33859fab","@Value":{"@Type":"24568a24","@Value":{"MemoryReserveForOnlineChange":"(int)0","ExcludeFromBuild":"(bool)True","External":"(bool)False","EnableSystemCall":"(bool)False","CompilerDefines":"(string)","LinkAlways":"(bool)False","Undefines":{"@Type":"[string]","@Value":[]}}}},{"@Key":"(Guid)829a18f2-c514-4f6e-9634-1df173429203","@Value":{"@Type":"829a18f2","@Value":{"ParentObjects":{"@Type":"fa2ee218:IDictionary","@Value":[{"@Key":"(Guid)21af5390-2942-461a-bf89-951aaf6999f1","@Value":"(Guid)ac04ec73-dae7-40c4-962f-23a27bade28e"}]}}}}]},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"24568a24":"{24568a24-c491-472c-a21f-ee5d33859fab}","2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","829a18f2":"{829a18f2-c514-4f6e-9634-1df173429203}","bool":"System.Boolean","fa2ee218":"{fa2ee218-a39b-4b6d-b249-49dbddbd168a}","Guid":"System.Guid","int":"System.Int32","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)xWrite_Trig();\n//xWrite_Trig.PT:= T#500MS;\nxWrite_Trig.CLK:= xWrite;\nxStart_Write:= xWrite_Trig.Q;\n\nxRead_Trig();\n//xRead_Trig.PT:= T#500MS;\nxRead_Trig.CLK:= xRead;\nxStart_Read:= xRead_Trig.Q;\n\nIF xStart_Write THEN\n   xDone:= FALSE;\n   IF xAppend_OverWrite THEN \n   hFile:= SysFileOpen(szFile:= xFilePath, am:= ACCESS_MODE.AM_APPEND, pResult:= ADR(udiOpenError1));\n   END_IF\n   IF xAppend_OverWrite = FALSE THEN\n      hFile:= SysFileOpen(szFile:= xFilePath, am:= ACCESS_MODE.AM_WRITE_PLUS, pResult:= ADR(udiOpenError1));\n   END_IF\n   udiPosError:= SysFileGetPos(hFile:= hFile, pulPos:= ADR(udiPos));\n   IF hFile <> RTS_INVALID_HANDLE THEN\n      xNew_Line:= concat('$n', xText_Write);\n      IF udiPos = 16#0 THEN\n         udiWrite:= SysFileWrite(hFile:= hFile, pbyBuffer:= ADR(xText_Write), ulSize:= INT_TO_UDINT(LEN(xText_Write)), pResult:= ADR(udiWriteError1));\n      ELSE\n         udiWrite:= SysFileWrite(hFile:= hFile, pbyBuffer:= ADR(xNew_Line), ulSize:= INT_TO_UDINT(LEN(xNew_Line)), pResult:= ADR(udiWriteError1));\n      END_IF\n      udiCloseError1:= SysFileClose(hFile:= hFile);\n   END_IF\n   xDone:= TRUE;\nEND_IF\n\nIF xStart_Read THEN\n   xDone:= FALSE;\n   hFile:= SysFileOpen(szFile:= xFilePath, am:= ACCESS_MODE.AM_READ, pResult:= ADR(udiOpenError1));\n   IF hFile <> RTS_INVALID_HANDLE THEN\n      udiBytesRead := SysFileRead(hFile:= hFile, pbyBuffer:= ADR(xText_Read), ulSize:=SIZEOF(xText_Read), pResult:=ADR(udiReadError1));\n      xText_Read[udiBytesRead]:= 0;\n   END_IF\n   //xDone:= TRUE;   \nEND_IF","LineInfoPersistence":"(string)2981888d-33c4-42b5-a277-752a58188136_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)FUNCTION_BLOCK FB_WriteToFile\nVAR_INPUT\n   xFilePath: STRING;\n   xText_Write: STRING(2000);\n   xAppend_OverWrite: BOOL;\n   xAppend_Pos: UDINT;\n   xWrite: BOOL;\n   xRead: BOOL;\n   xLine_No_To_Read: UDINT;   \nEND_VAR\nVAR_OUTPUT\n   xText_Read: STRING(2000);\n   xDone: BOOL;\nEND_VAR\nVAR\n   \n// Write Variables\n   xWrite_Trig: R_TRIG;\n   xStart_Write: BOOL;\n   xNew_Line: STRING(2000);\n   \n// Read Variables\n   xRead_Trig: R_TRIG;\n   xStart_Read: BOOL;\n   xLine_Read: UDINT;\n   \n   hFile           : RTS_IEC_HANDLE := RTS_INVALID_HANDLE;\n   udiBytesRead    : UDINT;\n   udiBytesCopied   : UDINT;\n   udiWrite      : UDINT;\n   udiFileSize     : UDINT;\n   udiPos         : UDINT;\n\n//(* Error Codes *)\n   udiPosError          : RTS_IEC_RESULT;\n   udiCopyError      : RTS_IEC_RESULT;\n   udiDeleteError1      : RTS_IEC_RESULT;\n   udiDeleteError2      : RTS_IEC_RESULT;\n   udiWriteError1      : RTS_IEC_RESULT;\n   udiWriteError2      : RTS_IEC_RESULT;\n   udiWriteError3      : RTS_IEC_RESULT;\n   udiOpenError1      : RTS_IEC_RESULT;\n   udiOpenError2      : RTS_IEC_RESULT;\n   udiOpenError3      : RTS_IEC_RESULT;\n   udiOpenError4      : RTS_IEC_RESULT;\n\n   udiReadError1   : RTS_IEC_RESULT;\n   udiReadError2   : RTS_IEC_RESULT;\n   udiReadError3   : RTS_IEC_RESULT;\n   udiCloseError1   : RTS_IEC_RESULT;\n   udiCloseError2   : RTS_IEC_RESULT;\n   udiCloseError3   : RTS_IEC_RESULT;\n   udiCloseError4   : RTS_IEC_RESULT;\n   udiSizeError : RTS_IEC_RESULT;\n   udiDirDeleteError: UDINT; \n   udiCreateError: UDINT;\nEND_VAR","LineInfoPersistence":"(string)2981888d-33c4-42b5-a277-752a58188136_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)104","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}